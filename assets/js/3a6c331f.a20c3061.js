"use strict";(self.webpackChunkskip_docs=self.webpackChunkskip_docs||[]).push([[6389],{25102:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>u});var n=t(74848),o=t(28453);const a={},i="Bruk av Terraform",s={id:"github-actions/bruk-av-terraform",title:"Bruk av Terraform",description:"For applikasjoner anbefaler vi \xe5 brukes Argo CD til utrulling av containere til Kubernetes. Terraform kan brukes til annen infrastruktur i Google Cloud eller on-prem.",source:"@site/docs/08-github-actions/bruk-av-terraform.md",sourceDirName:"08-github-actions",slug:"/github-actions/bruk-av-terraform",permalink:"/docs/github-actions/bruk-av-terraform",draft:!1,unlisted:!1,editUrl:"https://github.com/kartverket/skip-docs/edit/main/docs/08-github-actions/bruk-av-terraform.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Autentisering med Workload Identity Federation",permalink:"/docs/github-actions/autentisering-med-workload-identity-federation"},next:{title:"Kubectl fra GitHub Actions",permalink:"/docs/github-actions/kubectl-fra-github"}},c={},u=[{value:"Lagring av state",id:"lagring-av-state",level:2},{value:"Kj\xf8re Terraform i GitHub Actions",id:"kj\xf8re-terraform-i-github-actions",level:2}];function l(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.h1,{id:"bruk-av-terraform",children:"Bruk av Terraform"}),"\n",(0,n.jsxs)(r.p,{children:["For applikasjoner anbefaler vi \xe5 brukes ",(0,n.jsx)(r.a,{href:"/docs/argo-cd/",children:"Argo CD"})," til utrulling av containere til Kubernetes. Terraform kan brukes til annen infrastruktur i Google Cloud eller on-prem."]}),"\n",(0,n.jsx)(r.h2,{id:"lagring-av-state",children:"Lagring av state"}),"\n",(0,n.jsx)(r.p,{children:"Terraform bruker state for \xe5 kontrollere og sammenlikne den n\xe5v\xe6rende konfigurasjonen mot det som kj\xf8rer, staten m\xe5 lagres lokalt eller ekstern. P\xe5 SKIP bruker vi Google Cloud Storage til \xe5 lagre state, og oppsettet for dette kan man se under."}),"\n",(0,n.jsxs)(r.p,{children:["State bucket opprettes i repoet ",(0,n.jsx)(r.a,{href:"https://github.com/kartverket/gcp-service-accounts",children:"https://github.com/kartverket/gcp-service-accounts"}),"."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-hcl",children:'terraform {\n  backend "gcs" {\n    bucket = "terraform_state_foobar_1e8e"\n    prefix = "foobar-frontend"\n  }\n}\n'})}),"\n",(0,n.jsx)(r.p,{children:"For at backenden over skal kunne n\xe5 denne bucketen m\xe5 service-kontoen den kj\xf8rer som v\xe6re autentisert mot Google Cloud med riktige tilganger. Dette gj\xf8res i byggel\xf8ypa f\xf8r Terraform blir kj\xf8rt, se avsnittet under for hvordan man autentiserer med Google Cloud som en del av Github Actionen."}),"\n",(0,n.jsx)(r.h2,{id:"kj\xf8re-terraform-i-github-actions",children:"Kj\xf8re Terraform i GitHub Actions"}),"\n",(0,n.jsxs)(r.p,{children:["Se ",(0,n.jsx)(r.a,{href:"https://github.com/kartverket/github-workflows",children:"https://github.com/kartverket/github-workflows"})," for hvordan man bruker Terraform som en del av GitHub Actions."]})]})}function d(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},28453:(e,r,t)=>{t.d(r,{R:()=>i,x:()=>s});var n=t(96540);const o={},a=n.createContext(o);function i(e){const r=n.useContext(a);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function s(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),n.createElement(a.Provider,{value:r},e.children)}}}]);