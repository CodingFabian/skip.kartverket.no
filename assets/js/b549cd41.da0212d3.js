"use strict";(self.webpackChunkskip_docs=self.webpackChunkskip_docs||[]).push([[1672],{26596:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>p,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>a,toc:()=>k});var n=t(85893),s=t(11151);const o={},i="Bruk av porter i pods",a={id:"kubernetes/bruk-av-porter-i-pods",title:"Bruk av porter i pods",description:"Porter under 1024 er priviligierte og krever at prosessen som kj\xf8rer kj\xf8rer som root. Dette er ikke tillatt p\xe5 SKIP, og prosessen m\xe5 derfor binde til en h\xf8yere port. Dette betyr at man ofte m\xe5 gj\xf8re tilpasninger p\xe5 Docker-imaget man bygger slik at f.eks. nginx binder til en annen port.",source:"@site/docs/06-kubernetes/04-bruk-av-porter-i-pods.md",sourceDirName:"06-kubernetes",slug:"/kubernetes/bruk-av-porter-i-pods",permalink:"/docs/kubernetes/bruk-av-porter-i-pods",draft:!1,unlisted:!1,editUrl:"https://github.com/kartverket/skip-docs/edit/main/docs/06-kubernetes/04-bruk-av-porter-i-pods.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Retningslinjer for Kubernetes",permalink:"/docs/kubernetes/retningslinjer-for-kubernetes"},next:{title:"Autentisering mot GCP fra applikasjon",permalink:"/docs/kubernetes/autentisering-mot-gcp-fra-applikasjon"}},p={},k=[];function l(e){const r={code:"code",h1:"h1",p:"p",pre:"pre",...(0,s.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.h1,{id:"bruk-av-porter-i-pods",children:"Bruk av porter i pods"}),"\n",(0,n.jsx)(r.p,{children:"Porter under 1024 er priviligierte og krever at prosessen som kj\xf8rer kj\xf8rer som root. Dette er ikke tillatt p\xe5 SKIP, og prosessen m\xe5 derfor binde til en h\xf8yere port. Dette betyr at man ofte m\xe5 gj\xf8re tilpasninger p\xe5 Docker-imaget man bygger slik at f.eks. nginx binder til en annen port."}),"\n",(0,n.jsx)(r.p,{children:"N\xe5r prosessen i containeren binder seg til en upriviligert port, kan man spesifisere denne porten i Skiperator-manifestet slik som under. I bakgrunnen vil Skiperator ta seg av \xe5 lage en Kubernetes-service for denne porten slik at trafikken kan rutes til riktig sted."}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-yaml",children:'apiVersion: skiperator.kartverket.no/v1alpha1\nkind: Application\nmetadata:\n  name: teamname-frontend\n  namespace: yournamespace\nspec:\n  image: "kartverket/eksempel-image"\n  port: 8080\n  additionalPorts:\n    - name: metrics-port\n      port: 8181\n      protocol: TCP\n    - name: another-port\n      port: 8090\n      protocol: TCP\n'})}),"\n",(0,n.jsx)(r.p,{children:"En annen ting \xe5 merke seg her er muligheten for \xe5 spesifisere ekstra porter som kan benyttes til andre form\xe5l som f.eks. helsesjekker eller prometheus-metrikker. Disse portene vil automatisk f\xe5 opprettet en service, men det er fortsatt kun hovedporten som kobles opp mot en ingress-gateway. P\xe5 den m\xe5ten kan man skille ut endepunktet som ikke trengs eksternt."})]})}function d(e={}){const{wrapper:r}={...(0,s.a)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},11151:(e,r,t)=>{t.d(r,{Z:()=>a,a:()=>i});var n=t(67294);const s={},o=n.createContext(s);function i(e){const r=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),n.createElement(o.Provider,{value:r},e.children)}}}]);