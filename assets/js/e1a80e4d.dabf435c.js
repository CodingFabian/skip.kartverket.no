"use strict";(self.webpackChunkskip_docs=self.webpackChunkskip_docs||[]).push([[429],{3905:function(e,t,r){r.d(t,{Zo:function(){return u},kt:function(){return b}});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var p=n.createContext({}),l=function(e){var t=n.useContext(p),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},u=function(e){var t=l(e.components);return n.createElement(p.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},k=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,p=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),k=l(r),b=o,g=k["".concat(p,".").concat(b)]||k[b]||c[b]||a;return r?n.createElement(g,i(i({ref:t},u),{},{components:r})):n.createElement(g,i({ref:t},u))}));function b(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,i=new Array(a);i[0]=k;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var l=2;l<a;l++)i[l]=r[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}k.displayName="MDXCreateElement"},4107:function(e,t,r){r.r(t),r.d(t,{frontMatter:function(){return s},contentTitle:function(){return p},metadata:function(){return l},toc:function(){return u},default:function(){return k}});var n=r(7462),o=r(3366),a=(r(7294),r(3905)),i=["components"],s={sidebar_position:7},p="Oppsett og bruk av Harbor",l={unversionedId:"getting-started/harbor",id:"getting-started/harbor",isDocsHomePage:!1,title:"Oppsett og bruk av Harbor",description:"For \xe5 kunne publisere docker-images til registry i Harbor, m\xe5 man ha opprettet",source:"@site/docs/getting-started/harbor.md",sourceDirName:"getting-started",slug:"/getting-started/harbor",permalink:"/skip-docs/docs/getting-started/harbor",editUrl:"https://github.com/kartverket/skip-docs/edit/main/docs/getting-started/harbor.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"Login og tilgang til cluster milj\xf8er",permalink:"/skip-docs/docs/getting-started/login-and-access-to-cluster"},next:{title:"Oppsett og bruk av Vault",permalink:"/skip-docs/docs/getting-started/vault"}},u=[{value:"Opprette nytt prosjekt",id:"opprette-nytt-prosjekt",children:[]},{value:"Opprette robot-bruker for pushing av images fra GitLab",id:"opprette-robot-bruker-for-pushing-av-images-fra-gitlab",children:[]},{value:"Bruk av proxy cache",id:"bruk-av-proxy-cache",children:[]}],c={toc:u};function k(e){var t=e.components,s=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,n.Z)({},c,s,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"oppsett-og-bruk-av-harbor"},"Oppsett og bruk av Harbor"),(0,a.kt)("p",null,"For \xe5 kunne publisere docker-images til registry i Harbor, m\xe5 man ha opprettet\net prosjekt hvor disse kan ligge."),(0,a.kt)("p",null,"Et Harbor-prosjekt kan omfatte flere repoer, og det vil v\xe6re naturlig at repoer\nsom naturlig henger sammen publiserer til samme prosjekt. Eksempelvis vil\nBestill bruke ett Harbor-prosjekt for alle sine repoer, NRL2 bruke et annet osv."),(0,a.kt)("h2",{id:"opprette-nytt-prosjekt"},"Opprette nytt prosjekt"),(0,a.kt)("p",null,"Alle brukere kan opprette prosjekter i Harbor. Logg inn p\xe5\n",(0,a.kt)("a",{parentName:"p",href:"https://harbor.statkart.no"},"https://harbor.statkart.no")," med standard AD-brukernavn/passord."),(0,a.kt)("p",null,'Velg "New project".'),(0,a.kt)("p",null,(0,a.kt)("img",{src:r(9581).Z})),(0,a.kt)("p",null,"Skriv inn et passende navn p\xe5 prosjektet, svarer ofte til navnet p\xe5\nGitLab-gruppen hvor repoet man publiserer fra ligger under (bestill, nrl2, gbok,\nosv.)"),(0,a.kt)("p",null,(0,a.kt)("img",{src:r(9402).Z})),(0,a.kt)("p",null,'OBS! Huk av p\xe5 "Public" under Access Level, slik at man kan pulle images fra repoet uten \xe5 m\xe5tte logge seg inn.'),(0,a.kt)("h2",{id:"opprette-robot-bruker-for-pushing-av-images-fra-gitlab"},"Opprette robot-bruker for pushing av images fra GitLab"),(0,a.kt)("p",null,"For \xe5 publisere docker images fra GitLab-jobber trengs en robot-bruker, slik at man slipper \xe5 m\xe5tte autentisere seg med personlig bruker for slike operasjoner. Hvert prosjekt skal ha sin egen robot-bruker."),(0,a.kt)("p",null,'Klikk inn p\xe5 prosjektet man \xf8nsker \xe5 lage robot-bruker for. Velg "Robot Accounts"-fanen, og klikk p\xe5 knappen "New Robot Account". Gi roboten et kort, saklig navn, velg utl\xf8pstid i antall dager (eller "Never").'),(0,a.kt)("p",null,(0,a.kt)("img",{src:r(3673).Z}),"\n",(0,a.kt)("img",{src:r(9185).Z})),(0,a.kt)("p",null,'Merk at det fulle navnet p\xe5 roboten er en kombinasjon av "robot$", pluss navnet p\xe5 prosjektet, pluss navnet man skriver inn.'),(0,a.kt)("p",null,'Klikk "Add". I neste skjermbilde kommer navn og token opp. Klikk "Export to file" og lagre denne p\xe5 et sikkert sted. Man kan ikke hente ut eller endre token\'et til roboten i etterkant, dersom man har mistet det og trenger robot-bruker, m\xe5 man opprette ny.'),(0,a.kt)("h2",{id:"bruk-av-proxy-cache"},"Bruk av proxy cache"),(0,a.kt)("p",null,"Harbor kan ogs\xe5 brukes som proxy cache p\xe5 samme m\xe5te som vi har brukt Nexus tidligere, alts\xe5 hente inn docker images utenfra gjennom Harbor istedenfor direkte fra GitHub. Dette muliggj\xf8r bl.a. sikkerhetsscanning av docker images utenfra ogs\xe5. Merk at per n\xe5 st\xf8ttes det bare proxying av Docker Hub. Det kan ved behov legges til andre kilder ogs\xe5, men st\xf8tten for dette er meget begrenset (p.t. bare andre Harbor-registere)."),(0,a.kt)("p",null,"Proxy cache brukes p\xe5 samme m\xe5te som Nexus:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"> docker pull harbor.statkart.no/proxy_cache/<reponavn>/<imagenavn>:<tag>\n")),(0,a.kt)("p",null,"Reponavn erstattes med library dersom man puller fra single-level repoer:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"> docker pull harbor.statkart.no/proxy_cache/library/ubuntu:20.04\n")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://goharbor.io/docs/2.1.0/administration/configure-proxy-cache/"},"https://goharbor.io/docs/2.1.0/administration/configure-proxy-cache/")))}k.isMDXComponent=!0},9581:function(e,t,r){t.Z=r.p+"assets/images/harbor_new_proj-6f4af3027e7dfb3c48633fdf36efd370.png"},9402:function(e,t,r){t.Z=r.p+"assets/images/harbor_new_proj_dialog-d2b55921ebce383a4c0b500075e85f5c.png"},9185:function(e,t,r){t.Z=r.p+"assets/images/newrobotaccount-9a695621bd041cf694a45fe38ccb05bf.png"},3673:function(e,t,r){t.Z=r.p+"assets/images/robotaccountsfane-06534e7cdda46e44eb7a5956baea1a17.png"}}]);